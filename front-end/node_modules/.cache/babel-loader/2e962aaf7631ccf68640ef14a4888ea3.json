{"ast":null,"code":"var _jsxFileName = \"E:\\\\emergency-handling-react-node\\\\front-end\\\\src\\\\pages\\\\DemoLogin.js\",\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport './DemoLogin.css';\nimport Services from './services';\nimport Loading from '../Component/Loading'; //import Login from '../Component/Sdata/Login'\n\nimport { facebookProvider, googleProvider } from '../config/authMethods';\nimport socialMediaAuth from '../config/auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst DemoLogin = () => {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n  const [district, setDistrict] = useState();\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [signUpMode, setSignUpMode] = useState(false);\n  const [firstName, setFirstName] = useState();\n  const [lastName, setLastName] = useState();\n  const [msg, setMsg] = useState();\n  const [isLoading, setIsLoading] = useState();\n  const [phone, setPhone] = useState();\n  const [data, setData] = useState();\n  const [img, setImg] = useState();\n  const [type, setType] = useState();\n  let token = localStorage.getItem(\"token\");\n\n  const loginCheck = async () => {\n    setIsLoading(true);\n    console.log(\"called\");\n\n    try {\n      const response = await fetch('https://sumon-backend.herokuapp.com/api/userlogincheck', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + token\n        }\n      });\n      const responseData = await response.json();\n\n      if (response.ok) {\n        setLoggedIn(true);\n        setData(responseData.user.user.name);\n      } else {\n        setLoggedIn(false);\n        console.log(\"Token Error\");\n      }\n    } catch {\n      console.log(\"Catch\");\n    }\n\n    setIsLoading(false);\n  };\n\n  function App() {\n    _s();\n\n    useEffect(() => {\n      if (token) {\n        loginCheck();\n      }\n    }, []);\n  }\n\n  _s(App, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n  App();\n\n  const signUpHandler = async e => {\n    setIsLoading(true);\n    e.preventDefault();\n\n    try {\n      const response = await fetch('https://sumon-backend.herokuapp.com/api/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          first_name: firstName,\n          last_name: lastName,\n          phone: phone,\n          email: email,\n          password: password,\n          district\n        })\n      }); //const resposneData = await response.json();\n\n      console.log(response);\n\n      if (response.ok) {\n        setSignUpMode(false);\n        setMsg(\"Signp Successfull. Please Login\");\n      } else if (response.status === 400) {\n        setMsg(\"Email already exists\");\n      } else if (response.status === 401) {\n        setMsg(\"Phone already exists\");\n      } else {\n        setMsg(\"Something Bad, Contact Developers\");\n      }\n\n      setIsLoading(false);\n    } catch {\n      setIsLoading(false);\n    }\n  };\n\n  const loginHandler = async e => {\n    setIsLoading(true);\n    console.log(e);\n\n    if (e) {\n      e.preventDefault();\n    }\n\n    try {\n      const response = await fetch('https://sumon-backend.herokuapp.com/api/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: email,\n          password: password,\n          type: type\n        })\n      });\n      const responseData = await response.json();\n\n      if (response.ok) {\n        setLoggedIn(true);\n        setData(responseData.name);\n      } else {\n        setMsg(\"Wrong Credentials\");\n      }\n\n      setIsLoading(false);\n      localStorage.setItem(\"name\", JSON.stringify(responseData.session));\n      localStorage.setItem(\"token\", JSON.stringify(responseData.jsontoken));\n    } catch {\n      setIsLoading(false);\n    }\n  };\n\n  const handleEmailChange = e => {\n    setEmail(e.target.value);\n  };\n\n  const handlePasswordChange = e => {\n    setPassword(e.target.value);\n  };\n\n  const firstNameChange = e => {\n    setFirstName(e.target.value);\n  };\n\n  const lastNameChange = e => {\n    setLastName(e.target.value);\n  };\n\n  const phoneChange = e => {\n    setPhone(e.target.value);\n  };\n\n  const districtChange = e => {\n    setDistrict(e.target.value);\n  };\n\n  const modeToggle = () => {\n    setSignUpMode(!signUpMode);\n  };\n\n  const handleOnClick = async provider => {\n    const res = await socialMediaAuth(provider);\n\n    if (res.uid) {\n      setIsLoading(true);\n\n      try {\n        const response = await fetch('https://sumon-backend.herokuapp.com/api/login', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            email: res.email,\n            password: \"password\",\n            type: \"social\"\n          })\n        });\n        const responseData = await response.json();\n\n        if (response.ok) {\n          setLoggedIn(true);\n          setData(responseData.name);\n        } else {\n          setMsg(\"You are not Registered!!\");\n        }\n\n        setIsLoading(false);\n        localStorage.setItem(\"name\", JSON.stringify(responseData.session));\n        localStorage.setItem(\"token\", JSON.stringify(responseData.jsontoken));\n      } catch {\n        setIsLoading(false);\n      }\n    } else {\n      setMsg(\"User not found\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [isLoading && /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 27\n    }, this), !isLoading && !loggedIn && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Social Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleOnClick(facebookProvider),\n        children: \"Facebook\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleOnClick(googleProvider),\n        children: \"Google\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }, this), !isLoading && loggedIn && /*#__PURE__*/_jsxDEV(Services, {\n      data: data\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 40\n    }, this), !isLoading && !loggedIn && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 13\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 23\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 33\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 42\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: modeToggle,\n        children: signUpMode ? 'Login' : 'Sign Up'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 18\n      }, this), signUpMode && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"First Name: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"first_name\",\n          value: firstName,\n          onChange: firstNameChange,\n          type: \"text\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Last Name: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"last_name\",\n          value: lastName,\n          onChange: lastNameChange,\n          type: \"text\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Phone: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"phone\",\n          value: phone,\n          onChange: phoneChange,\n          type: \"phone\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"District: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"district\",\n          value: district,\n          onChange: districtChange,\n          type: \"text\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Email: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          name: \"email\",\n          onChange: handleEmailChange,\n          type: \"email\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Password: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: handlePasswordChange,\n          name: \"password\",\n          type: \"password\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 16\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"center\",\n          onClick: signUpMode ? signUpHandler : loginHandler,\n          type: \"submit\",\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 7\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 17\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 27\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"red center\",\n          children: msg\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 191,\n    columnNumber: 9\n  }, this);\n};\n\n_s2(DemoLogin, \"Ysyq8Yu1Q+RXzgKO3slCQZGvE5I=\");\n\n_c = DemoLogin;\nexport default DemoLogin;\n\nvar _c;\n\n$RefreshReg$(_c, \"DemoLogin\");","map":{"version":3,"sources":["E:/emergency-handling-react-node/front-end/src/pages/DemoLogin.js"],"names":["React","useState","useEffect","Services","Loading","facebookProvider","googleProvider","socialMediaAuth","DemoLogin","email","setEmail","password","setPassword","district","setDistrict","loggedIn","setLoggedIn","signUpMode","setSignUpMode","firstName","setFirstName","lastName","setLastName","msg","setMsg","isLoading","setIsLoading","phone","setPhone","data","setData","img","setImg","type","setType","token","localStorage","getItem","loginCheck","console","log","response","fetch","method","headers","responseData","json","ok","user","name","App","signUpHandler","e","preventDefault","body","JSON","stringify","first_name","last_name","status","loginHandler","setItem","session","jsontoken","handleEmailChange","target","value","handlePasswordChange","firstNameChange","lastNameChange","phoneChange","districtChange","modeToggle","handleOnClick","provider","res","uid"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport './DemoLogin.css'\r\nimport Services from './services'\r\nimport Loading from '../Component/Loading'\r\n//import Login from '../Component/Sdata/Login'\r\nimport {facebookProvider, googleProvider} from '../config/authMethods'\r\nimport socialMediaAuth from '../config/auth'\r\n\r\n\r\nconst DemoLogin = () => {\r\n\r\n    const [email, setEmail] = useState();\r\n    const [password, setPassword] = useState();\r\n    const [district, setDistrict] = useState();\r\n    const [loggedIn, setLoggedIn] = useState(false);\r\n    const [signUpMode, setSignUpMode] = useState(false);\r\n    const [firstName, setFirstName] = useState();\r\n    const [lastName, setLastName] = useState();\r\n    const [msg, setMsg] = useState();\r\n    const [isLoading, setIsLoading] = useState();\r\n    const [phone, setPhone] = useState();\r\n    const [data, setData] = useState();\r\n    const [img, setImg] = useState();\r\n    const[type, setType] = useState();\r\n    let token = localStorage.getItem(\"token\")\r\n    const loginCheck = async () => {\r\n        setIsLoading(true);\r\n        console.log(\"called\");\r\n        try{\r\n        const response = await fetch('https://sumon-backend.herokuapp.com/api/userlogincheck' , {\r\n            method: 'GET',\r\n            headers: {\r\n                'Content-Type': 'application/json',\r\n                'Authorization': 'Bearer ' + token\r\n            }\r\n        });\r\n        const responseData = await response.json();\r\n        if(response.ok) {\r\n            setLoggedIn(true)\r\n            setData(responseData.user.user.name)\r\n        }\r\n        else {\r\n            setLoggedIn(false)\r\n            console.log(\"Token Error\")\r\n        }\r\n        }\r\n        catch {\r\n            console.log(\"Catch\")\r\n        }\r\n        setIsLoading(false)\r\n    };\r\n    function App() {\r\n        useEffect(() => {\r\n            if(token){\r\n                loginCheck()\r\n            }\r\n            \r\n        }, []);\r\n    } \r\n    App();\r\n    const signUpHandler = async e => {\r\n        setIsLoading(true)\r\n        e.preventDefault();\r\n\r\n        try{\r\n        const response = await fetch('https://sumon-backend.herokuapp.com/api/' , {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                first_name: firstName,\r\n                last_name: lastName,\r\n                phone: phone,\r\n                email: email,\r\n                password: password,\r\n                district\r\n            })\r\n            \r\n        });\r\n        //const resposneData = await response.json();\r\n        console.log(response)\r\n        if(response.ok) {setSignUpMode(false); setMsg(\"Signp Successfull. Please Login\")}\r\n        else if (response.status===400) {setMsg(\"Email already exists\")}\r\n        else if (response.status===401) {setMsg(\"Phone already exists\")}\r\n        else {setMsg(\"Something Bad, Contact Developers\");}\r\n        setIsLoading(false)\r\n        \r\n    }\r\n    catch {\r\n        setIsLoading(false)\r\n    }\r\n    }\r\n\r\n    const loginHandler = async e => {\r\n        setIsLoading(true)\r\n        console.log(e)\r\n        if(e) {e.preventDefault()}\r\n\r\n        try{\r\n\r\n        const response = await fetch('https://sumon-backend.herokuapp.com/api/login' , {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                email: email,\r\n                password: password,\r\n                type: type\r\n            })\r\n            \r\n        });\r\n        const responseData = await response.json();\r\n        if(response.ok) {\r\n            setLoggedIn(true)\r\n            setData(responseData.name)\r\n        }\r\n        else {setMsg(\"Wrong Credentials\")}\r\n        setIsLoading(false)\r\n        localStorage.setItem(\"name\", JSON.stringify(responseData.session))\r\n        localStorage.setItem(\"token\", JSON.stringify(responseData.jsontoken))\r\n        \r\n    }\r\n    catch {\r\n        setIsLoading(false)\r\n    }\r\n    \r\n    \r\n    };\r\n    const handleEmailChange = e => {\r\n        setEmail(e.target.value);\r\n    }\r\n    const handlePasswordChange = e => {\r\n        setPassword(e.target.value);\r\n    }\r\n    const firstNameChange = e =>{\r\n        setFirstName(e.target.value);\r\n    }\r\n    const lastNameChange = e =>{\r\n        setLastName(e.target.value);\r\n    }\r\n    const phoneChange =  e =>{\r\n        setPhone(e.target.value);\r\n    }\r\n    const districtChange =  e =>{\r\n        setDistrict(e.target.value);\r\n    }\r\n    const modeToggle = () => {\r\n        setSignUpMode(!signUpMode)\r\n    }\r\n\r\n    const handleOnClick = async (provider)=>{\r\n        const res = await socialMediaAuth(provider)\r\n        if(res.uid){\r\n        setIsLoading(true)\r\n\r\n        try{\r\n\r\n        const response = await fetch('https://sumon-backend.herokuapp.com/api/login' , {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                email: res.email,\r\n                password: \"password\",\r\n                type: \"social\"\r\n            })\r\n            \r\n        });\r\n        const responseData = await response.json();\r\n        if(response.ok) {\r\n            setLoggedIn(true)\r\n            setData(responseData.name)\r\n        }\r\n        else {setMsg(\"You are not Registered!!\")}\r\n        setIsLoading(false)\r\n        localStorage.setItem(\"name\", JSON.stringify(responseData.session))\r\n        localStorage.setItem(\"token\", JSON.stringify(responseData.jsontoken))\r\n        \r\n    }\r\n    catch {\r\n        setIsLoading(false)\r\n    }\r\n\r\n        }\r\n        else{setMsg(\"User not found\")}\r\n    }\r\n    return(\r\n        <React.Fragment>\r\n            {isLoading && <Loading/>}\r\n            {!isLoading && !loggedIn && \r\n            <div>\r\n            <br></br>\r\n            <p>Social Login</p>\r\n            <button onClick={()=>handleOnClick(facebookProvider)}>Facebook</button>\r\n            <button onClick={()=>handleOnClick(googleProvider)}>Google</button>\r\n            <br></br> \r\n            </div>}\r\n            {!isLoading && loggedIn && <Services data={data}/>}\r\n            {!isLoading && !loggedIn && \r\n            \r\n        <div className=\"App\">\r\n            <br></br> <br></br> <br></br><br></br>\r\n            <button onClick={modeToggle}>{signUpMode? 'Login' : 'Sign Up'}</button>\r\n        <br></br>\r\n        <br></br><br></br>\r\n        {signUpMode && \r\n        <div>\r\n            <label>First Name: </label>\r\n            <input name=\"first_name\" value={firstName} onChange={firstNameChange} type=\"text\"></input>\r\n            <br></br>\r\n            <br></br>\r\n            <label>Last Name: </label>\r\n            <input name=\"last_name\" value={lastName} onChange={lastNameChange} type=\"text\"></input>\r\n            <br></br>\r\n            <br></br>\r\n            <label>Phone: </label>\r\n            <input name=\"phone\" value={phone} onChange={phoneChange} type=\"phone\" required></input>\r\n            <br></br><br></br>\r\n            <label>District: </label>\r\n            <input name=\"district\" value={district} onChange={districtChange} type=\"text\" required></input>\r\n            <br></br>\r\n        </div>}\r\n        <div>\r\n        <br></br>\r\n      <label>Email: </label>\r\n      <input name=\"email\" onChange={handleEmailChange} type=\"email\" required></input>\r\n      <br></br><br></br>\r\n      <label>Password: </label>\r\n      <input onChange={handlePasswordChange} name=\"password\" type=\"password\" required></input>\r\n      <br></br><br></br>\r\n      <button className=\"center\"onClick={signUpMode? signUpHandler : loginHandler } type=\"submit\">Submit</button>\r\n      <br></br> <br></br> <br></br>\r\n      <p className=\"red center\">{msg}</p>\r\n      </div>\r\n    </div>\r\n    \r\n            }\r\n            \r\n    \r\n    </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default DemoLogin;"]},"metadata":{},"sourceType":"module"}