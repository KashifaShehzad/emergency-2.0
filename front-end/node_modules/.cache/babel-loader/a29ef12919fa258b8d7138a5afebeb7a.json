{"ast":null,"code":"var _jsxFileName = \"E:\\\\emergency-handling-react-node\\\\front-end\\\\src\\\\Component\\\\userProfile.js\",\n    _s2 = $RefreshSig$();\n\nimport React from 'react';\nimport './userProfile.css';\nimport { Form, Card, Button } from 'react-bootstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst UserProfile = props => {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const data = props.data;\n  const [email, setEmail] = useState();\n  const [district, setDistrict] = useState();\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [signUpMode, setSignUpMode] = useState(false);\n  const [firstName, setFirstName] = useState();\n  const [lastName, setLastName] = useState();\n  const [msg, setMsg] = useState();\n  const [isLoading, setIsLoading] = useState();\n  const [phone, setPhone] = useState();\n  let token = localStorage.getItem(\"token\");\n\n  const loginCheck = async () => {\n    setIsLoading(true);\n    console.log(\"called\");\n\n    try {\n      const response = await fetch('https://helping-backend.vercel.app/api/userlogincheck', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer ' + token\n        }\n      });\n      const responseData = await response.json();\n\n      if (response.ok) {\n        setLoggedIn(true);\n        setData(responseData.user.user.name);\n      } else {\n        setLoggedIn(false);\n        console.log(\"Token Error\");\n      }\n    } catch {\n      console.log(\"Catch\");\n    }\n\n    setIsLoading(false);\n  };\n\n  function App() {\n    _s();\n\n    useEffect(() => {\n      if (token) {\n        loginCheck();\n      }\n    }, []);\n  }\n\n  _s(App, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n  App();\n\n  const signUpHandler = async e => {\n    setIsLoading(true);\n    e.preventDefault();\n\n    try {\n      const response = await fetch('https://helping-backend.vercel.app/api/', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          first_name: firstName,\n          last_name: lastName,\n          phone: phone,\n          email: email,\n          password: password,\n          district\n        })\n      }); //const resposneData = await response.json();\n\n      console.log(response);\n\n      if (response.ok) {\n        setSignUpMode(false);\n        setMsg(\"Signp Successfull. Please Login\");\n      } else if (response.status === 400) {\n        setMsg(\"Email already exists\");\n      } else if (response.status === 401) {\n        setMsg(\"Phone already exists\");\n      } else {\n        setMsg(\"Something Bad, Contact Developers\");\n      }\n\n      setIsLoading(false);\n    } catch {\n      setIsLoading(false);\n    }\n  };\n\n  const loginHandler = async e => {\n    setIsLoading(true);\n    console.log(e);\n\n    if (e) {\n      e.preventDefault();\n    }\n\n    try {\n      const response = await fetch('https://helping-backend.vercel.app/api/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: email,\n          password: password,\n          type: type\n        })\n      });\n      const responseData = await response.json();\n\n      if (response.ok) {\n        setLoggedIn(true);\n        setData(responseData.name);\n      } else {\n        setMsg(\"Wrong Credentials\");\n      }\n\n      setIsLoading(false);\n      localStorage.setItem(\"name\", JSON.stringify(responseData.session));\n      localStorage.setItem(\"token\", JSON.stringify(responseData.jsontoken));\n    } catch {\n      setIsLoading(false);\n    }\n  };\n\n  const handleEmailChange = e => {\n    setEmail(e.target.value);\n  };\n\n  const handlePasswordChange = e => {\n    setPassword(e.target.value);\n  };\n\n  const firstNameChange = e => {\n    setFirstName(e.target.value);\n  };\n\n  const lastNameChange = e => {\n    setLastName(e.target.value);\n  };\n\n  const phoneChange = e => {\n    setPhone(e.target.value);\n  };\n\n  const districtChange = e => {\n    setDistrict(e.target.value);\n  };\n\n  const modeToggle = () => {\n    setSignUpMode(!signUpMode);\n  };\n\n  const handleOnClick = async provider => {\n    const res = await socialMediaAuth(provider);\n\n    if (res.uid) {\n      setIsLoading(true);\n\n      try {\n        const response = await fetch('https://helping-backend.vercel.app/api/login', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            email: res.email,\n            password: \"password\",\n            type: \"social\"\n          })\n        });\n        const responseData = await response.json();\n\n        if (response.ok) {\n          setLoggedIn(true);\n          setData(responseData.name);\n        } else {\n          setMsg(\"You are not Registered!!\");\n        }\n\n        setIsLoading(false);\n        localStorage.setItem(\"name\", JSON.stringify(responseData.session));\n        localStorage.setItem(\"token\", JSON.stringify(responseData.jsontoken));\n      } catch {\n        setIsLoading(false);\n      }\n    } else {\n      setMsg(\"User not found\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile\",\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      className: \"width\",\n      style: {\n        width: '40%'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n        style: {\n          height: '50px',\n          textAlign: 'center',\n          fontSize: \"20px\"\n        },\n        children: \"My profile\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n        children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n          name: \"first_name\",\n          value: firstName,\n          onChange: firstNameChange,\n          type: \"text\",\n          placeholder: \"First name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          name: \"last_name\",\n          value: lastName,\n          onChange: lastNameChange,\n          type: \"text\",\n          placeholder: \"Last Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          name: \"phone\",\n          value: phone,\n          onChange: phoneChange,\n          type: \"phone\",\n          required: true,\n          placeholder: \"Phone\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          name: \"district\",\n          value: district,\n          onChange: districtChange,\n          type: \"text\",\n          required: true,\n          placeholder: \"District\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Card.Footer, {\n        style: {\n          height: '70px'\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"danger\",\n          children: \"Update\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 14\n    }, this)\n  }, data.id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 188,\n    columnNumber: 9\n  }, this);\n};\n\n_s2(UserProfile, \"UKEfZLID0B46H3zeq4d4TM7uW7o=\");\n\n_c = UserProfile;\nexport default UserProfile;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserProfile\");","map":{"version":3,"sources":["E:/emergency-handling-react-node/front-end/src/Component/userProfile.js"],"names":["React","Form","Card","Button","UserProfile","props","data","email","setEmail","useState","district","setDistrict","loggedIn","setLoggedIn","signUpMode","setSignUpMode","firstName","setFirstName","lastName","setLastName","msg","setMsg","isLoading","setIsLoading","phone","setPhone","token","localStorage","getItem","loginCheck","console","log","response","fetch","method","headers","responseData","json","ok","setData","user","name","App","useEffect","signUpHandler","e","preventDefault","body","JSON","stringify","first_name","last_name","password","status","loginHandler","type","setItem","session","jsontoken","handleEmailChange","target","value","handlePasswordChange","setPassword","firstNameChange","lastNameChange","phoneChange","districtChange","modeToggle","handleOnClick","provider","res","socialMediaAuth","uid","width","height","textAlign","fontSize","id"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport './userProfile.css'\r\nimport {Form, Card, Button} from 'react-bootstrap';\r\n\r\n\r\nconst UserProfile = (props) => {\r\n    const data = props.data\r\n        const [email, setEmail] = useState();\r\n        const [district, setDistrict] = useState();\r\n        const [loggedIn, setLoggedIn] = useState(false);\r\n        const [signUpMode, setSignUpMode] = useState(false);\r\n        const [firstName, setFirstName] = useState();\r\n        const [lastName, setLastName] = useState();\r\n        const [msg, setMsg] = useState();\r\n        const [isLoading, setIsLoading] = useState();\r\n        const [phone, setPhone] = useState();\r\n      \r\n        let token = localStorage.getItem(\"token\")\r\n        const loginCheck = async () => {\r\n            setIsLoading(true);\r\n            console.log(\"called\");\r\n            try{\r\n            const response = await fetch('https://helping-backend.vercel.app/api/userlogincheck' , {\r\n                method: 'GET',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': 'Bearer ' + token\r\n                }\r\n            });\r\n            const responseData = await response.json();\r\n            if(response.ok) {\r\n                setLoggedIn(true)\r\n                setData(responseData.user.user.name)\r\n            }\r\n            else {\r\n                setLoggedIn(false)\r\n                console.log(\"Token Error\")\r\n            }\r\n            }\r\n            catch {\r\n                console.log(\"Catch\")\r\n            }\r\n            setIsLoading(false)\r\n        };\r\n        function App() {\r\n            useEffect(() => {\r\n                if(token){\r\n                    loginCheck()\r\n                }\r\n                \r\n            }, []);\r\n        } \r\n        App();\r\n        const signUpHandler = async e => {\r\n            setIsLoading(true)\r\n            e.preventDefault();\r\n    \r\n            try{\r\n            const response = await fetch('https://helping-backend.vercel.app/api/' , {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    first_name: firstName,\r\n                    last_name: lastName,\r\n                    phone: phone,\r\n                    email: email,\r\n                    password: password,\r\n                    district\r\n                })\r\n                \r\n            });\r\n            //const resposneData = await response.json();\r\n            console.log(response)\r\n            if(response.ok) {setSignUpMode(false); setMsg(\"Signp Successfull. Please Login\")}\r\n            else if (response.status===400) {setMsg(\"Email already exists\")}\r\n            else if (response.status===401) {setMsg(\"Phone already exists\")}\r\n            else {setMsg(\"Something Bad, Contact Developers\");}\r\n            setIsLoading(false)\r\n            \r\n        }\r\n        catch {\r\n            setIsLoading(false)\r\n        }\r\n        }\r\n    \r\n        const loginHandler = async e => {\r\n            setIsLoading(true)\r\n            console.log(e)\r\n            if(e) {e.preventDefault()}\r\n    \r\n            try{\r\n    \r\n            const response = await fetch('https://helping-backend.vercel.app/api/login' , {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    email: email,\r\n                    password: password,\r\n                    type: type\r\n                })\r\n                \r\n            });\r\n            const responseData = await response.json();\r\n            if(response.ok) {\r\n                setLoggedIn(true)\r\n                setData(responseData.name)\r\n            }\r\n            else {setMsg(\"Wrong Credentials\")}\r\n            setIsLoading(false)\r\n            localStorage.setItem(\"name\", JSON.stringify(responseData.session))\r\n            localStorage.setItem(\"token\", JSON.stringify(responseData.jsontoken))\r\n            \r\n        }\r\n        catch {\r\n            setIsLoading(false)\r\n        }\r\n        \r\n        \r\n        };\r\n        const handleEmailChange = e => {\r\n            setEmail(e.target.value);\r\n        }\r\n        const handlePasswordChange = e => {\r\n            setPassword(e.target.value);\r\n        }\r\n        const firstNameChange = e =>{\r\n            setFirstName(e.target.value);\r\n        }\r\n        const lastNameChange = e =>{\r\n            setLastName(e.target.value);\r\n        }\r\n        const phoneChange =  e =>{\r\n            setPhone(e.target.value);\r\n        }\r\n        const districtChange =  e =>{\r\n            setDistrict(e.target.value);\r\n        }\r\n        const modeToggle = () => {\r\n            setSignUpMode(!signUpMode)\r\n        }\r\n    \r\n        const handleOnClick = async (provider)=>{\r\n            const res = await socialMediaAuth(provider)\r\n            if(res.uid){\r\n            setIsLoading(true)\r\n    \r\n            try{\r\n    \r\n            const response = await fetch('https://helping-backend.vercel.app/api/login' , {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify({\r\n                    email: res.email,\r\n                    password: \"password\",\r\n                    type: \"social\"\r\n                })\r\n                \r\n            });\r\n            const responseData = await response.json();\r\n            if(response.ok) {\r\n                setLoggedIn(true)\r\n                setData(responseData.name)\r\n            }\r\n            else {setMsg(\"You are not Registered!!\")}\r\n            setIsLoading(false)\r\n            localStorage.setItem(\"name\", JSON.stringify(responseData.session))\r\n            localStorage.setItem(\"token\", JSON.stringify(responseData.jsontoken))\r\n            \r\n        }\r\n        catch {\r\n            setIsLoading(false)\r\n        }\r\n    \r\n            }\r\n            else{setMsg(\"User not found\")}\r\n        }\r\n    \r\n    \r\n\r\n    return(\r\n    \r\n        <div className=\"profile\" key={data.id}>\r\n             <Card className=\"width\" style={{ width: '40%' }}>\r\n            <Card.Header style={{ height: '50px', textAlign: 'center', fontSize:\"20px\"}}>\r\n             My profile\r\n            </Card.Header>\r\n            <Card.Body>\r\n            <Form.Control name=\"first_name\" value={firstName} onChange={firstNameChange} type=\"text\" placeholder=\"First name\"></Form.Control>\r\n                    <Form.Control name=\"last_name\" value={lastName} onChange={lastNameChange} type=\"text\" placeholder=\"Last Name\"></Form.Control>\r\n\r\n                    <Form.Control name=\"phone\" value={phone} onChange={phoneChange} type=\"phone\" required placeholder=\"Phone\"></Form.Control>\r\n                    \r\n                    <Form.Control name=\"district\" value={district} onChange={districtChange} type=\"text\" required placeholder=\"District\"></Form.Control>\r\n       \r\n            </Card.Body>\r\n            <Card.Footer style={{ height: '70px' }}>\r\n            <Button variant=\"danger\">Update</Button>\r\n           \r\n           \r\n            </Card.Footer>\r\n            </Card>  \r\n            \r\n        </div>\r\n        \r\n    )\r\n\r\n}\r\n\r\nexport default UserProfile"]},"metadata":{},"sourceType":"module"}